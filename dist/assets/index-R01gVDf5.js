import{u as E,L as I,r as i,j as e,d as N,P as T,R as D,f as Q,a as z,b as ae,c as V,Q as B,T as we,e as xe,N as be,I as je}from"./index-pq0QBJLT.js";const ye="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='48'%20viewBox='0%20-960%20960%20960'%20width='48'%3e%3cpath%20d='M726.986-74.5q-49.638%200-84.562-35.03-34.924-35.031-34.924-84.708%200-6.751%201.5-16.639%201.5-9.887%204.5-18.08L319.348-399.935q-15.718%2017.718-38.518%2028.576-22.8%2010.859-46.723%2010.859-49.836%200-84.722-34.938-34.885-34.938-34.885-84.576%200-49.638%2034.885-84.562%2034.886-34.924%2084.722-34.924%2023.923%200%2045.723%209.359%2021.8%209.358%2039.518%2027.076L613.5-732.043q-3-7.311-4.5-16.514-1.5-9.204-1.5-17.535%200-49.54%2034.938-84.474%2034.938-34.934%2084.576-34.934%2049.638%200%2084.562%2034.938t34.924%2084.576q0%2049.638-34.885%2084.562-34.886%2034.924-84.722%2034.924-24.277%200-46.419-7.612-22.141-7.612-37.583-25.344L348.5-516.957q2.239%208.24%203.62%2019.104%201.38%2010.864%201.38%2018.094%200%207.231-1.38%2015.234-1.381%208.003-3.62%2016.482l294.391%20166.499q15.442-14.732%2036.26-23.344%2020.819-8.612%2047.742-8.612%2049.836%200%2084.722%2034.938%2034.885%2034.938%2034.885%2084.576%200%2049.638-34.938%2084.562T726.986-74.5Zm.049-637.5Q750-712%20765.5-727.535q15.5-15.535%2015.5-38.5T765.465-804.5q-15.535-15.5-38.5-15.5T688.5-804.465q-15.5%2015.535-15.5%2038.5t15.535%2038.465q15.535%2015.5%2038.5%2015.5Zm-493%20286Q257-426%20272.5-441.535q15.5-15.535%2015.5-38.5T272.465-518.5q-15.535-15.5-38.5-15.5T195.5-518.465q-15.5%2015.535-15.5%2038.5t15.535%2038.465q15.535%2015.5%2038.5%2015.5Zm493%20286Q750-140%20765.5-155.535q15.5-15.535%2015.5-38.5T765.465-232.5q-15.535-15.5-38.5-15.5T688.5-232.465q-15.5%2015.535-15.5%2038.5t15.535%2038.465q15.535%2015.5%2038.5%2015.5ZM727-766ZM234-480Zm493%20286Z'%20/%3e%3c/svg%3e",ke="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='%23F45B69'%20height='24'%20viewBox='0%20-960%20960%20960'%20width='24'%3e%3cpath%20d='M160-400v-80h280v80H160Zm0-160v-80h440v80H160Zm0-160v-80h440v80H160Zm360%20560v-123l221-220q9-9%2020-13t22-4q12%200%2023%204.5t20%2013.5l37%2037q8%209%2012.5%2020t4.5%2022q0%2011-4%2022.5T863-380L643-160H520Zm300-263-37-37%2037%2037ZM580-220h38l121-122-18-19-19-18-122%20121v38Zm141-141-19-18%2037%2037-18-19Z'/%3e%3c/svg%3e",qe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='%23F45B69'%20height='24'%20viewBox='0%20-960%20960%20960'%20width='24'%3e%3cpath%20d='M160-160v-80h110l-16-14q-52-46-73-105t-21-119q0-111%2066.5-197.5T400-790v84q-72%2026-116%2088.5T240-478q0%2045%2017%2087.5t53%2078.5l10%2010v-98h80v240H160Zm400-10v-84q72-26%20116-88.5T720-482q0-45-17-87.5T650-648l-10-10v98h-80v-240h240v80H690l16%2014q49%2049%2071.5%20106.5T800-482q0%20111-66.5%20197.5T560-170Z'/%3e%3c/svg%3e",Ne="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='%23F45B69'%20height='24'%20viewBox='0%20-960%20960%20960'%20width='24'%3e%3cpath%20d='M440-82q-76-8-141.5-41.5t-114-87Q136-264%20108-333T80-480q0-91%2036.5-168T216-780h-96v-80h240v240h-80v-109q-55%2044-87.5%20108.5T160-480q0%20123%2080.5%20212.5T440-163v81Zm-17-214L254-466l56-56%20113%20113%20227-227%2056%2057-283%20283Zm177%20196v-240h80v109q55-45%2087.5-109T800-480q0-123-80.5-212.5T520-797v-81q152%2015%20256%20128t104%20270q0%2091-36.5%20168T744-180h96v80H600Z'/%3e%3c/svg%3e",Te="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='%23F45B69'%20height='24'%20viewBox='0%20-960%20960%20960'%20width='24'%3e%3cpath%20d='M480-320q75%200%20127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75%200-127.5%2052.5T300-500q0%2075%2052.5%20127.5T480-320Zm0-72q-45%200-76.5-31.5T372-500q0-45%2031.5-76.5T480-608q45%200%2076.5%2031.5T588-500q0%2045-31.5%2076.5T480-392Zm0%20192q-146%200-266-81.5T40-500q54-137%20174-218.5T480-800q146%200%20266%2081.5T920-500q-54%20137-174%20218.5T480-200Zm0-300Zm0%20220q113%200%20207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113%200-207.5%2059.5T128-500q50%20101%20144.5%20160.5T480-280Z'/%3e%3c/svg%3e",Se="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='%23F45B69'%20height='48'%20viewBox='0%20-960%20960%20960'%20width='48'%3e%3cpath%20d='M846.218-685.63v503.478q0%2027.599-20.337%2047.865-20.336%2020.265-48.033%2020.265H182.152q-27.599%200-47.865-20.265-20.265-20.266-20.265-47.865v-595.696q0-27.697%2020.265-48.033%2020.266-20.337%2047.865-20.337H685.63L846.218-685.63Zm-68.37%2030.587L655.043-777.848H182.152v595.696h595.696v-472.891ZM479.765-247.152q43.235%200%2073.735-30.265t30.5-73.5q0-43.235-30.265-73.735-30.264-30.5-73.5-30.5-43.235%200-73.735%2030.264-30.5%2030.265-30.5%2073.5%200%2043.236%2030.265%2073.736%2030.264%2030.5%2073.5%2030.5ZM235.152-581.848h358v-143h-358v143Zm-53-73.195v472.891-595.696%20122.805Z'/%3e%3c/svg%3e",$e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='white'%20height='48'%20viewBox='0%20-960%20960%20960'%20width='48'%3e%3cpath%20d='M182.152-114.022q-27.599%200-47.865-20.265-20.265-20.266-20.265-47.865v-595.696q0-27.697%2020.265-48.033%2020.266-20.337%2047.865-20.337h298.283v68.37H182.152v595.696h298.283v68.13H182.152Zm481.457-182.369-48.74-48.5%20100.805-101.044H358.565v-68.13h355.109L612.869-615.109l48.74-48.5L846.218-479%20663.609-296.391Z'/%3e%3c/svg%3e",Ce="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='white'%20height='24'%20viewBox='0%20-960%20960%20960'%20width='24'%3e%3cpath%20d='m370-80-16-128q-13-5-24.5-12T307-235l-119%2050L78-375l103-78q-1-7-1-13.5v-27q0-6.5%201-13.5L78-585l110-190%20119%2050q11-8%2023-15t24-12l16-128h220l16%20128q13%205%2024.5%2012t22.5%2015l119-50%20110%20190-103%2078q1%207%201%2013.5v27q0%206.5-2%2013.5l103%2078-110%20190-118-50q-11%208-23%2015t-24%2012L590-80H370Zm70-80h79l14-106q31-8%2057.5-23.5T639-327l99%2041%2039-68-86-65q5-14%207-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99%2042q-22-23-48.5-38.5T533-694l-13-106h-79l-14%20106q-31%208-57.5%2023.5T321-633l-99-41-39%2068%2086%2064q-5%2015-7%2030t-2%2032q0%2016%202%2031t7%2030l-86%2065%2039%2068%2099-42q22%2023%2048.5%2038.5T427-266l13%20106Zm42-180q58%200%2099-41t41-99q0-58-41-99t-99-41q-59%200-99.5%2041T342-480q0%2058%2040.5%2099t99.5%2041Zm-2-140Z'/%3e%3c/svg%3e";function Y(a){const s=E(),o=new I("ConfirmationDialog",s),[p,n]=i.useState(!1);return i.useEffect(()=>{a.display&&n(!1)},[a.display]),e.jsx(e.Fragment,{children:e.jsx("div",{className:a.display&&!p?"conf-dialog":"conf-dialog-hidden",children:e.jsxs("div",{children:[e.jsx("h4",{children:a.title?a.title:o.tr("Confirmation")}),e.jsx("p",{children:a.text?a.text:o.tr("Are you sure you want to do that?")}),e.jsxs("div",{children:[e.jsx("button",{className:"conf-can-btn",onClick:()=>{a.handleCancelation(),n(!0)},children:a.cancelText?a.cancelText:o.tr("Cancel")}),e.jsx("button",{className:"conf-btn",onClick:()=>{a.handleConfirmation(),n(!0)},children:a.confirmText?a.confirmText:o.tr("Confirm")})]})]})})})}const Ze="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='%23F45B69'%20height='24'%20viewBox='0%20-960%20960%20960'%20width='24'%3e%3cpath%20d='M640-520v-80h240v80H640Zm-280%2040q-66%200-113-47t-47-113q0-66%2047-113t113-47q66%200%20113%2047t47%20113q0%2066-47%20113t-113%2047ZM40-160v-112q0-34%2017.5-62.5T104-378q62-31%20126-46.5T360-440q66%200%20130%2015.5T616-378q29%2015%2046.5%2043.5T680-272v112H40Zm80-80h480v-32q0-11-5.5-20T580-306q-54-27-109-40.5T360-360q-56%200-111%2013.5T140-306q-9%205-14.5%2014t-5.5%2020v32Zm240-320q33%200%2056.5-23.5T440-640q0-33-23.5-56.5T360-720q-33%200-56.5%2023.5T280-640q0%2033%2023.5%2056.5T360-560Zm0-80Zm0%20400Z'/%3e%3c/svg%3e",ne="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='white'%20height='24'%20viewBox='0%20-960%20960%20960'%20width='24'%3e%3cpath%20d='m256-200-56-56%20224-224-224-224%2056-56%20224%20224%20224-224%2056%2056-224%20224%20224%20224-56%2056-224-224-224%20224Z'/%3e%3c/svg%3e";function De(a){const s=E(),o=new I("ShareDialog",s),[p,n]=i.useState(!1),[d,h]=i.useState(""),[x,m]=i.useState(!0);i.useEffect(()=>{a.display&&g(),n(!1)},[a.display]),i.useEffect(()=>{a.noteId&&g()},[a.noteId]);const[u,k]=i.useState(null);function g(){N.getDocument("6596cad23e73ca778d45","6596caffee95a2a2c2a7",a.noteId).then(c=>{k(c),P(u),b(u.$permissions.includes(T.read(D.any())))}).catch(()=>{})}const[Z,b]=i.useState(!1);function j(){const c=u.$permissions;N.updateDocument("6596cad23e73ca778d45","6596caffee95a2a2c2a7",u.$id,void 0,[...c,T.read(D.any())]).then(v=>{b(!0)}).catch(()=>{})}function q(){var c=u.$permissions;c=c.filter(function(v){return v!==T.read(D.any())}),N.updateDocument("6596cad23e73ca778d45","6596caffee95a2a2c2a7",u.$id,void 0,c).then(v=>{b(!1)}).catch(()=>{})}function _(c){m(!0);const v={"Content-Type":"application/json"},w={ownerId:s.current.$id,sessionId:s.current.sessionId,noteId:u.$id,email:c};Q.createExecution("65a6f370b6b21d9a78d2",JSON.stringify(w),!1,"/","DELETE",v).then(L=>{console.log(L),g()}).catch(()=>{m(!1)})}function S(c){m(!0);const v={"Content-Type":"application/json"},w={ownerId:s.current.$id,sessionId:s.current.sessionId,noteId:u.$id,email:c};Q.createExecution("65a6f370b6b21d9a78d2",JSON.stringify(w),!1,"/","POST",v).then(L=>{g()}).catch(()=>{m(!1)})}const[y,$]=i.useState([]);function P(c){m(!0);const v=`?ownerId=${s.current.$id}&sessionId=${s.current.sessionId}&noteId=${c.$id}`;Q.createExecution("65a6f370b6b21d9a78d2","",!1,"/"+v,"GET").then(w=>{w.success?($(JSON.parse(w.responseBody)),m(!1),h("")):($([]),m(!1))}).catch(()=>{$([]),m(!1)})}return e.jsx(e.Fragment,{children:e.jsx("div",{className:a.display&&!p?"share-dialog":"share-dialog-hidden",children:e.jsxs("div",{children:[e.jsxs("div",{className:"sh-top",children:[e.jsx("h4",{children:o.tr("Share this note")}),e.jsx("img",{onClick:()=>{a.onClose(),n(!0)},src:ne})]}),e.jsx("p",{children:o.tr("You can quickly share a note with a friend to easily collaborate by providing the email associated to their Rubium account.")}),e.jsxs("div",{className:"sh-search",children:[e.jsx("input",{placeholder:o.tr("Enter the email to share with"),value:d,onChange:c=>{h(c.target.value)}}),x?e.jsx(z,{}):e.jsx("button",{className:"share-btn",onClick:()=>{S(d)},children:o.tr("Add")})]}),e.jsx("div",{className:"shared-list",children:x?e.jsx(e.Fragment,{}):y.length==0?e.jsx("p",{children:o.tr("You haven´t shared this note with anyone yet.")}):y.map(c=>e.jsxs("div",{className:"sh-list-item",children:[e.jsx("img",{className:"sh-profile",src:ae.getInitials(c.name)}),e.jsx("p",{children:c.name+" ("+c.email+")"}),e.jsx("img",{className:"sh-remove",src:Ze,onClick:()=>{_(c.email)}})]}))}),e.jsx("br",{}),e.jsxs("p",{children:["(Experimental) ",o.tr("You can also publish it on the web, creating a share-able link")]}),Z?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("a",{onClick:()=>{navigator.clipboard.writeText(`${window.location.host}/note/${u.$id}`)},children:`${window.location.host}/note/${u.$id}`})}),e.jsx("button",{className:"share-can-btn",onClick:()=>{q()},children:o.tr("Un-Publish")})]}):e.jsx("button",{className:"share-can-btn",onClick:()=>{j()},children:o.tr("Publish")})]})})})}function Ee(a){const s=E(),o=new I("SettingsDialog",s),[p,n]=i.useState(!1),[d,h]=i.useState(""),[x,m]=i.useState(""),[u,k]=i.useState("en");i.useEffect(()=>{a.display&&n(!1)},[a.display]),i.useEffect(()=>{s.current&&(h(s.current.name),m(s.current.email),k(s.current.prefs.locale))},[s,a.display]);function g(_){return new Date(_).getFullYear()}function Z(_){const S=_.target.value;k(S)}const[b,j]=i.useState(!1);function q(){j(!0),s.updateUserSettings(d,{...s.current.prefs,locale:u}).then(()=>{o.setLocale(u),j(!1),n(!0),a.onClose()})}return e.jsx(e.Fragment,{children:e.jsx("div",{className:a.display&&!p?"settings-dialog":"settings-dialog-hidden",children:e.jsxs("div",{children:[e.jsxs("div",{className:"st-top",children:[e.jsx("h4",{children:o.tr("Settings")}),e.jsx("img",{onClick:()=>{a.onClose(),n(!0)},src:ne})]}),s&&s.current?e.jsxs("div",{className:"st-dtls",children:[e.jsxs("div",{children:[e.jsx("img",{src:ae.getInitials(d||" ")}),e.jsxs("p",{children:[o.tr("You are a Rubium member since")," ",e.jsxs("strong",{children:[g(s.current.$createdAt)," "]}),e.jsx("br",{})]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[o.tr("Name")," ",e.jsx("input",{value:d,onChange:_=>{h(_.target.value)}})]}),e.jsxs("p",{children:["Email ",e.jsx("input",{disabled:!0,value:x})]}),e.jsxs("p",{children:[o.tr("Language"),e.jsx("select",{value:u,onChange:_=>{Z(_)},children:o.getLangs().map(_=>e.jsx("option",{value:_.locale,children:_.name}))})]})]})]}):e.jsx(z,{}),e.jsx("div",{className:"st-right",children:b?e.jsx(z,{}):e.jsx("button",{onClick:()=>{q()},children:o.tr("Save Changes")})})]})})})}function Ie(a){const s=E(),o=new I("GetStarted",s),[p,n]=i.useState("");return e.jsx("div",{className:"get-started",children:e.jsxs("div",{className:"gs-main",children:[e.jsxs("div",{className:"gs-left",children:[e.jsxs("h1",{children:[o.tr("Start your journey with")," ",e.jsx("b",{children:"Rubium"})]}),e.jsx("img",{src:V})]}),e.jsx("div",{}),e.jsx("div",{}),e.jsxs("div",{className:"gs-right",children:[e.jsx("h3",{children:o.tr("What are you taking notes of today?")}),e.jsx("input",{placeholder:o.tr("Answer here..."),value:p,onChange:d=>{n(d.target.value)}}),e.jsx("button",{onClick:()=>{a.onStart(p)},children:o.tr("Get Started")})]})]})})}function ie(a){return e.jsx("i",{style:{fontSize:a.size?a.size:"16px"},className:"em_"+a.name,onClick:s=>{a.onClick(s)}})}let Le=["grin","beam","joy","laugh","grin_1","grin_2","grin_3","grin_4","wink","smile","savor","smile_1","smile_2","blow_kiss","kiss","kiss_1","kiss_2","smile_4","hug_face","star_struck","think","eyebrow","neutral","expressionless","face","smirk","face","sad","mouth_open","mouth_zip","hushed_face","sleepy_face","tired","sleeping","relieved","wink_1","squint_tongue","drool","unamused","downcast","pensive","confused","face_down","money_mouth","astonished","frown","confounded","disappointed","worried","nose","crying","wail","frown","anguished","fearful","weary","exploding","grimace","anxious","screaming","flushed","zany_face","dizzy","poute","angry","nauseated","vomiting","sneezing","cowboy","lying","nerd","angry_1","clown","ogre","goblin","skull","ghost","alien","thermometer","robot","poo","baby","child","boy","girl","person","man","beard","woman","older_person","old_man","old_woman","monkey_1","monkey_2","monkey_3","police","detective","guard","prince","princess","baby_angel","Santa_Claus","mage","fairy","vampire","merperson","merman","mermaid","elf","genie","man_genie","woman_genie","zombie","person_frown","man_frown","woman_frown","person_pout","man_pout","woman_pout","person_no","man_no","woman_no","person_ok","man_ok","woman_ok","person_tip","man_tip","woman_tip","person_hand","man_hand","woman_hand","person_bow","man_bow","woman_bow","person_facepalm","man_facepalm","woman_facepalm","person_shrug","man_shrug","woman_shrug","person_walk","man_walk","woman_walk","person_run","man_run","woman_run","woman_dance","man_dance","person_climb","man_climb","woman_climb","person_lotus","man_lotus","woman_lotus","shower","nap","horse_racing","skier","snowboarder","person_surfing","man_surfing","woman_surfing","person_swim","man_swim","woman_swim","person_lift","man_lift","woman_lift","person_cycle","race_car","motorcycle","person_cartwheel","man_cartwheel","woman_cartwheel","people_wrestle","men_wrestle","women_wrestle","person_juggle","man_juggle","woman_juggle","couple_1","kissing","kissing_1","couple","family","selfie","biceps","sure","fu","victory","fingers_","vulcan_salute","call_me","raised_hand","ok","thumbs_up","thumbs_down","raised_fist","fist","left_fist","right_fist","wave","love_your","write","clap","open_hands","raising_hands","palms_up","folded_hands","handshake","nail_polish","ear","nose","footprints","eyes","eye","brain","mouth","kiss_mark","heart_beat","revolving_hearts","two_hearts","broken_heart","heart","anger_symbol","bomb","collision","sweat","dizzy_1","speech_balloon","anger","thought","hole","glasses","sunglasses","neck_tie","t_shirt","jeans","scarf","gloves","coat","socks","dress","kimono","bikini","women_cloth","purse","handbag","clutch_bag","shopping_bag","backpack","man_shoe","running_shoe","heeled_shoe","woman_boot","crown","woman_hat","top_hat","graduation_cap","billed_cap","rescue_helmet","lipstick","ring","gem_stone","monkey_face","monkey","gorilla","dog_face","dog","poodle","wolf_face","fox_face","cat_face","cat","lion","tiger_face","tiger","leopard","horse_face","horse","unicorn","zebra","deer","cow_face","ox","water_buffalo","cow","pig_face","pig","boar","pig_nose","ram","ewe","goat","camel","camel_2","giraffe","elephant","rhinoceros","mouse_face","mouse","rat","hamster","rabbit_face","rabbit","chipmunk","hedgehog","bat","bear_face","koala","panda","paw","turkey","chicken","rooster","chick","chick_1","chick_2","bird","penguin","dove","eagle","duck","owl","frog","crocodile","turtle","lizard","snake","dragon_face","dragon","sauropod","spouting_whale","whale","dolphin","fish","fish_1","blowfish","shark","octopus","spiral_shell","butterfly","bug","ant","honeybee","beetle","cricket","spider","spider_web","scorpion","bouquet","cherry_blossom","rosette","rose","wilted_flower","hibiscus","sunflower","blossom","tulip","seedling","tree","palm_tree","cactus","herb","shamrock","maple_leaf","fallen_leaf","leaf_in_wind","grapes","melon","watermelon","tangerine","lemon","banana","pineapple","apple","pear","peach","cherries","strawberry","kiwi_fruit","tomatoes","coconut","avocado","eggplant","potato","carrot","pepper","cucumber","broccoli","mushroom","peanuts","chestnut","bread","croissant","baguette","pretzel","pancakes","cheese","meat","poultry","meat_cut","bacon","hamburger","fries","pizza","hot_dog","sandwich","taco","burrito","flatbread","egg","cooking","pan_of_food","food","spoon","salad","popcorn","canned_food","bento_box","curry_rice","steaming_bowl","spaghetti","roasted_sweet_potato","oden","sushi","fried_shrimp","dango","dumpling","fortune_cookie","takeout_box","crab","shrimp","squid","soft_ice_cream","shaved_ice","ice_cream","doughnut","cookie","birthday_cake","shortcake","pie","chocolate_bar","candy","lollipop","custard","honey_pot","baby_bottle","milk","teacup","sake","wine","cocktail","tropical_drink","beer_mug","clinking_glasses","tumbler_glass","chopsticks","cutlery","fork_knife","spoon","kitchen_knife","amphora","globe_africa","snow_capped","mountain","volcano","camping","beach","desert","stadium","building","houses","house","home","office_building","post_office","hospital","bank","hotel","convenience_store","school","department_store","factory","Japanese_castle","castle","statue_of_Liberty","church","mosque","synagogue","fountain","tent","hot_springs","ferris_wheel","roller_coaster","barber_pole","circus_tent","railway_car","train","metro","light_rail","station","tram","monorail","railway","tram","bus","oncoming_bus","ambulance","fire_engine","taxi","oncoming_taxi","tractor","bicycle","kick_scooter","motor_scooter","motorway","railway_track","stop_sign","construction","anchor","sailboat","canoe","speedboat","passenger_ship","ferry","motor_boat","ship","airplane","small_airplane","departure","arrival","seat","helicopter","cableway","tramway","satellite","rocket","flying_saucer","hourglass","hourglass_1","watch","alarm_clock","stopwatch","new_moon","thermometer","sun","star","glowing_star","cloud","tornado","cyclone","rainbow","closed_umbrella","umbrella","high_voltage","snowflake","comet","fire","droplet","jack-o-lantern","christmas_tree","sparkles","balloon","party_popper","wind_chime","ribbon","gift","tickets","medal","trophy","medal_4","medal_1","medal_2","medal_3","soccer_ball","baseball","basketball","volleyball","american_football","rugby","tennis","bowling","cricket","hockey","ice_hockey","ping_pong","badminton","boxing_glove","goal_net","flag_in_hole","ice_skate","fishing_pole","skis","sled","direct_hit","crystal_ball","video_game","joystick","game_die","chess_pawn","megaphone","postal_horn","bell","microphone","headphone","saxophone","guitar","musical_keyboard","trumpet","violin","drum","mobile","telephone","pager","battery","laptop","desktop","keyboard","mouse","trackball","camera","candle","bulb","flashlight","notebook","book","books","notebook","ledger","bookmark","label","money_bag","yen","dollar","euro","pound","credit_card","dollar_sign","envelope","email","outbox","inbox","package","black_nib","fountain_pen","pen","paintbrush","memo","briefcase","file_folder","calendar","card_index","clipboard","pushpin","paperclip","ruler","scissors","cabinet","wastebasket","locked","unlocked","key","old_key","hammer","pick","wrench","dagger","swords","pistol","bow","shield","wrench","nut_bolt","gear","scale","link","chains","microscope","telescope","satellite","syringe","pill","door","bed","couch_lamp","toilet","shower","bathtub"];function Fe(a){const[s,o]=i.useState(""),p=E(),n=new I("EmojiSelector",p);return e.jsxs("div",{className:"emjsel",children:[e.jsx("input",{value:s,onChange:d=>{o(d.target.value)},placeholder:n.tr("Search Emojis...")}),e.jsx("div",{children:Le.filter(d=>{if(d.toLowerCase().includes(s.toLowerCase()))return d}).map(d=>e.jsx(ie,{size:"20px",name:d,onClick:()=>{a.onSelect(d)}}))})]})}function ze(){const a=E(),s=new I("NoteApp",a),[o,p]=i.useState(!1);i.useState(0),i.useState([]);const[n,d]=i.useState(""),[h,x]=i.useState([]),[m,u]=i.useState(""),[k,g]=i.useState(!0),[Z,b]=i.useState(!0),[j,q]=i.useState(!0);i.useEffect(()=>{y(),document.onkeydown=function(t){(t.ctrlKey||t.metaKey)&&t.key.toLowerCase()==="e"&&p(!0)}},[]),i.useEffect(()=>{window.document.title=(n.title?n.title+" | ":"")+"Rubium",H(!1)},[n]),i.useEffect(()=>{y()},[m]);function _(t){u(t.target.value)}function S(t,r){t=="draft"&&d({$id:"draft",title:r||s.tr("New Note"),content:""}),b(!0),N.getDocument("6596cad23e73ca778d45","6596caffee95a2a2c2a7",t).then(l=>{d(l);//!tmp fix
setTimeout(()=>{b(!1)},400)}).catch(()=>{b(!1)})}function y(t=!1){g(!0);const r=m.length>0?[B.search("title",m),B.select(["$id","$updatedAt","title","$permissions"]),B.orderDesc("$updatedAt")]:[B.select(["$id","$updatedAt","title","$permissions"]),B.orderDesc("$updatedAt")];N.listDocuments("6596cad23e73ca778d45","6596caffee95a2a2c2a7",r).then(l=>{x(l.documents),(n==""||t)&&v(l.documents[0]),g(!1)}).catch(()=>{g(!1)})}function $(t=!1,r=!1){if(r||g(!0),q(!1),n.$id=="draft"){const l=D.user(a.current.$id),f=[T.read(l),T.update(l),T.delete(l)],F={emoji:n.emoji,title:n.title,content:n.content};x(h.filter(se=>se.$id!=="draft")),N.createDocument("6596cad23e73ca778d45","6596caffee95a2a2c2a7",je.unique(),F,f).then(se=>{C(s.tr("Saved new note successfully!"),"success"),y(!0),q(!0)}).catch(()=>{C(s.tr("Error saving new note..."),"error"),g(!1)})}else N.updateDocument("6596cad23e73ca778d45","6596caffee95a2a2c2a7",n.$id,{emoji:t=="emoji"?r:n.emoji,title:t=="title"?r:n.title,content:t=="content"?r:n.content}).then(l=>{r||y(),q(!0)}).catch(()=>{C(s.tr("Error saving changes..."),"error")})}function P(t){g(!0),t.$id=="draft"?(x(h.filter(r=>r.$id!=="draft")),C(s.tr("Draft discarded successfully!"),"success"),y(!0)):N.deleteDocument("6596cad23e73ca778d45","6596caffee95a2a2c2a7",t.$id).then(r=>{C(s.tr("Note deleted successfully!"),"success"),y(!0)}).catch(()=>{C(s.tr("Error deleting note..."),"error"),g(!1)})}function c(t=void 0){h.find(r=>r.$id==="draft")||(g(!0),p(!0),C(s.tr("Created a new draft!"),"info"),x([...h,{$id:"draft",title:t||s.tr("New Note"),content:[{type:"p",text:""}]}]),S("draft",t),g(!1))}function v(t){t.$id!==n.$id&&(u(""),p(!1),S(t.$id))}const[w,L]=i.useState(-1),[oe,re]=i.useState(null),[G,le]=i.useState(0);function A(t,r){q(!1),le(G+1);const l=Date.now();w==-1?L(l):w!==-1&&w+5e3<=l&&(L(l),$(t,r));let f=1e3;(G<10||t=="emoji")&&(f=600),clearTimeout(oe),re(setTimeout(()=>{$(t,r)},f))}function ce(t){if(t.length>32)return;const r=n.emoji;d({...n,emoji:t});let l=h.filter(f=>f.$id===n.$id);l[0].emoji=t,r!==t&&n.$id!=="draft"&&A("emoji",t)}function de(t){const r=n.title;d({...n,title:t});let l=h.filter(f=>f.$id===n.$id);l[0].title=t,r!==t&&n.$id!=="draft"&&A("title",t)}function me(t){const r=n.content;d({...n,content:t}),r!==t&&n.$id!=="draft"&&A("content",t)}function J(t){const r=t.toString();return r.length==1?"0"+r:r}function ue(t){const r=new Date(t),l=new Date,f=new Date;f.setDate(f.getDate()-1);let F=r.getDate()+"/"+(r.getMonth()+1)+"/"+r.getFullYear();return r.toDateString()==l.toDateString()?F=s.tr("Today at "):f.toDateString()==r.toDateString()&&(F=s.tr("Yesterday at ")),F+" "+J(r.getHours())+":"+J(r.getMinutes())}function he(t){return a.current&&t.$permissions&&t.$permissions.includes(T.update(D.user(a.current.$id)))}function M(t){return a.current&&t.$permissions&&t.$permissions.includes(T.delete(D.user(a.current.$id)))}const[ge,fe]=i.useState("");function C(t,r){fe(t);var l=document.getElementById("toast");const f="show "+r;l.className=l.className.replace(f,""),setTimeout(function(){l.className=f},100),setTimeout(function(){l.className=l.className.replace(f,"")},4900)}const[W,H]=i.useState(),[R,U]=i.useState(null),[pe,K]=i.useState(!1),[_e,X]=i.useState(!1),[O,ve]=i.useState(!0),[ee,te]=i.useState(!1);return i.useEffect(()=>{a.current&&!a.current.emailVerification&&ve(!1)},[a]),e.jsxs("div",{className:"app",children:[e.jsx(we,{message:ge}),e.jsx(De,{display:pe,noteId:n.$id,onClose:()=>{K(!1)}}),e.jsx(Ee,{display:_e,onClose:()=>{X(!1)}}),e.jsx(Y,{display:R!==null,text:`${s.tr("Are you sure you want to delete the note named")}
 "${R&&R.title}"?`,handleCancelation:()=>{U(null)},handleConfirmation:()=>{P(R),U(null)}}),e.jsx(Y,{display:!O&&!ee,text:s.tr("Verify your account with the link sent to your email to continue using Rubium. Press 'Done' after you verified the email."),title:s.tr("Email Verification Required"),cancelText:s.tr("Re-send email"),confirmText:s.tr("Done"),handleCancelation:async()=>{a.sendVerification(),te(!0)},handleConfirmation:()=>{document.location.reload()}}),e.jsx(Y,{display:!O&&ee,text:s.tr("We have re-sent the verification link to your email. Press 'Ok' when you are finished verifying it."),title:s.tr("Check your email again"),cancelText:s.tr("Re-send again"),confirmText:"Ok",handleCancelation:async()=>{a.sendVerification(),te(!1)},handleConfirmation:()=>{document.location.reload()}}),O?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sidebar",children:[e.jsxs("div",{className:"side-title",children:[e.jsx("img",{src:V}),s.eval("_invertName")?e.jsxs("p",{children:["Rubium",e.jsxs("strong",{children:[e.jsx("br",{})," ",s.tr("of")," ",a.current&&a.current.name]})]}):e.jsxs("p",{children:[e.jsx("strong",{children:a.current&&a.current.name+"'s"}),e.jsx("br",{}),"Rubium"]})]}),e.jsxs("div",{className:"note-create",children:[e.jsx("button",{onClick:()=>{c()},children:"+"}),e.jsx("input",{type:"text",placeholder:s.tr("Search notes..."),className:"side-search",value:m,onChange:_})]}),e.jsx("div",{className:"notes-area",children:k?e.jsx(z,{}):h.length!==0?h.map(t=>e.jsxs("div",{className:`side-item ${n.$id==t.$id?"side-item-selected":""}`,onClick:()=>{v(t)},children:[e.jsxs("p",{children:[t.title,e.jsxs("a",{className:t.$id=="draft"?"draft":M(t)?"private":"shared",children:[" ",M(t)||t.$id=="draft"?t.$id=="draft"?s.tr("Draft Note"):ue(t.$updatedAt):s.tr("Shared with me")," "]})]}),M(t)?e.jsx("img",{onClick:()=>{U(n)},src:xe}):e.jsx(e.Fragment,{})]},t.$id)):e.jsx("div",{className:"side-item",children:m.length>0?s.tr("No results found"):s.tr("Nothing to see here.")})}),e.jsxs("div",{className:"side-btns",children:[e.jsxs("button",{onClick:()=>{X(!0)},children:[s.tr("Settings"),e.jsx("img",{src:Ce})]}),e.jsxs("button",{onClick:async()=>{await a.logout()},children:[s.tr("Logout")," ",e.jsx("img",{src:$e})]})]})]}),e.jsxs("div",{className:"main-div",children:[e.jsx("div",{className:"main-controls",children:Z||!k&&h.length==0&&m.length==0?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[n.$id=="draft"?e.jsx(e.Fragment,{}):e.jsxs("div",{className:"sv-to-cloud "+(j?"":"gray"),children:[e.jsx("p",{children:j?s.tr("Saved to the Cloud"):s.tr("Saving...")}),e.jsx("img",{className:j?"":"sync-rotate",src:j?Ne:qe})]}),he(n)||n.$id=="draft"?e.jsxs("div",{className:"edit-icon",onClick:()=>{o&&$(),p(!o),H(!1)},children:[e.jsx("img",{src:o?n.$id=="draft"?Se:Te:ke}),e.jsx("p",{children:o?n.$id=="draft"?s.tr("Save"):s.tr("Preview"):s.tr("Edit")})]}):e.jsx(e.Fragment,{}),M(n)?e.jsxs("div",{className:"share-icon",onClick:()=>{K(!0)},children:[e.jsx("img",{src:ye}),e.jsx("p",{children:s.tr("Share")})]}):e.jsx(e.Fragment,{})]})}),!k&&h.length==0&&m.length==0?e.jsx(Ie,{onStart:t=>{c(t)}}):Z?e.jsx(z,{}):e.jsxs("div",{className:"main-div-inner",children:[e.jsxs("div",{className:"emoji-title",children:[!n.emoji&&!o?e.jsx(e.Fragment,{}):e.jsx("div",{className:"emoji-con",onClick:()=>{o&&H(!W)},children:n.emoji?e.jsx(ie,{size:"36px",name:n.emoji}):o?e.jsx("p",{children:"+"}):e.jsx("p",{})}),e.jsx("input",{className:"note-title",disabled:!o,type:"text",value:n.title,onChange:t=>{de(t.target.value)}})]}),W?e.jsx(Fe,{onSelect:t=>{ce(t),H(!1)}}):e.jsx(e.Fragment,{}),e.jsx(be,{editable:o,content:n.content,setContent:t=>{me(t)}})]})]})]}):e.jsx(e.Fragment,{}),e.jsxs("div",{className:"mobile-dev",children:[e.jsx("img",{src:V}),e.jsx("h1",{children:s.tr("We are sorry but our app is still under development for smaller screens...")})]})]})}export{ze as default};
